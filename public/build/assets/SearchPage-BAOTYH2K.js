import{r as l,j as e,q as D,s as O,t as V,B as W,D as Z,f as T,P as L,M as H,k as G,l as J}from"./index-D9U5T7Ps.js";import{Q as U}from"./QuranHeader-hMdu4oKG.js";import{S as z}from"./SearchField-Bnh0SeJq.js";import"./vendor-DavUf6mE.js";import"./auth-CHpCKrUu.js";function B({ayah:a,surah:b,playAudio:d,isPlaying:p,activeAyah:v,highlightText:k=null}){const[y,f]=l.useState(3),o=()=>{f(s=>Math.min(s+.5,6))},S=()=>{f(s=>Math.max(s-.5,1.5))},A=()=>{f(3)},P=()=>({fontSize:`${y}rem`}),i=s=>{if(!k||!s)return s;try{const x=document.createElement("div");x.innerHTML=s;const N=h=>{if(h.nodeType!==Node.TEXT_NODE){h.childNodes.length>0&&Array.from(h.childNodes).forEach(c=>{N(c)});return}const j=h.textContent,C=new RegExp(`(${k})`,"gi");if(C.test(j)){const c=j.replace(C,'<mark class="bg-accent-100 text-accent-800 px-1 rounded">$1</mark>'),_=document.createDocumentFragment(),w=document.createElement("div");for(w.innerHTML=c;w.firstChild;)_.appendChild(w.firstChild);h.parentNode.replaceChild(_,h)}};return Array.from(x.childNodes).forEach(h=>{N(h)}),x.innerHTML}catch(x){return console.error("Error highlighting text:",x),s}};if(!a)return null;const I=()=>{d&&d(a)};return e.jsxs("div",{className:"bg-white rounded-2xl shadow-xl hover:shadow-2xl transition-all duration-300 p-6 mb-6 border border-green-100",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"h-10 w-10 bg-gradient-to-r from-green-600 to-emerald-600 rounded-full flex items-center justify-center text-white font-bold mr-4 shadow-lg",children:a.ayah_number}),e.jsx("a",{href:`/surah/${a.surah_number}/${a.ayah_number}`,className:"text-green-700 hover:text-green-800 font-semibold text-lg transition-colors duration-200",children:b||a.surah?`Surah ${(b||a.surah).name_latin} (${a.surah_number}):${a.ayah_number}`:`Surah ${a.surah_number}:${a.ayah_number}`})]}),e.jsx("button",{onClick:I,className:`p-3 rounded-full hover:shadow-lg transition-all duration-300 ${p?"bg-gradient-to-r from-red-500 to-pink-500 hover:from-red-600 hover:to-pink-600":"bg-gradient-to-r from-green-600 to-emerald-600 hover:from-green-700 hover:to-emerald-700"} text-white shadow-md`,title:p?"Pause audio":"Play audio",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",viewBox:"0 0 20 20",fill:"currentColor",children:p?e.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8 7a1 1 0 00-1 1v4a1 1 0 001 1h4a1 1 0 001-1V8a1 1 0 00-1-1H8z",clipRule:"evenodd"}):e.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM9.555 7.168A1 1 0 008 8v4a1 1 0 001.555.832l3-2a1 1 0 000-1.664l-3-2z",clipRule:"evenodd"})})})]}),e.jsxs("div",{className:"text-right leading-relaxed font-arabic mb-6 text-green-800 bg-gradient-to-r from-green-50 to-emerald-50 rounded-xl border border-green-100 p-6 relative",children:[e.jsxs("div",{className:"absolute top-3 left-3 flex gap-1",children:[e.jsx("button",{onClick:S,disabled:y<=1.5,className:"p-1.5 rounded-md bg-white/80 border border-green-200 text-green-700 hover:bg-green-100 disabled:opacity-50 disabled:cursor-not-allowed transition-colors shadow-sm",title:"Perkecil teks Arab",children:e.jsx(D,{className:"w-4 h-4"})}),e.jsx("button",{onClick:A,className:"p-1.5 rounded-md bg-white/80 border border-green-200 text-green-700 hover:bg-green-100 transition-colors text-xs font-medium shadow-sm",title:"Reset ukuran teks Arab",children:e.jsx(O,{className:"w-4 h-4"})}),e.jsx("button",{onClick:o,disabled:y>=6,className:"p-1.5 rounded-md bg-white/80 border border-green-200 text-green-700 hover:bg-green-100 disabled:opacity-50 disabled:cursor-not-allowed transition-colors shadow-sm",title:"Perbesar teks Arab",children:e.jsx(V,{className:"w-4 h-4"})})]}),e.jsx("div",{className:"font-arabic text-right leading-loose pt-8",style:P(),dir:"rtl",children:a.text_arabic})]}),e.jsxs("div",{className:"text-green-700 leading-relaxed mb-4 p-4 bg-green-50/70 rounded-xl border border-green-100",children:[e.jsx("div",{className:"text-sm font-medium text-green-800 mb-2",children:"Terjemahan Indonesia:"}),k?e.jsx("div",{className:"text-lg",dangerouslySetInnerHTML:{__html:i(a.text_indonesian)}}):e.jsx("div",{className:"text-lg",dangerouslySetInnerHTML:{__html:a.text_indonesian}})]}),a.text_latin&&e.jsxs("div",{className:"mb-4 p-4 bg-green-50/70 rounded-xl border border-green-100",children:[e.jsx("div",{className:"text-sm font-medium text-green-800 mb-2",children:"Transliterasi:"}),e.jsx("p",{className:"text-green-700 italic text-lg",children:a.text_latin})]}),e.jsxs("div",{className:"mt-6 pt-4 flex justify-between items-center text-sm text-green-600 border-t border-green-100",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-800 border border-blue-200",children:["Juz ",a.juz||"-"]}),e.jsxs("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-xs font-medium bg-purple-100 text-purple-800 border border-purple-200",children:["Halaman ",a.page||"-"]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("button",{onClick:()=>{const s=`üïå *${b?b.name_indonesian:`Surah ${a.surah_number}`}* - Ayat ${a.ayah_number}

üî§ *Arab:*
${a.text_arabic}

üáÆüá© *Terjemahan Indonesia:*
${a.text_indonesian||a.translation_id}

üîó Baca selengkapnya: ${window.location.origin}/surah/${a.surah_number}/${a.ayah_number}

üì± Dibagikan dari IndoQuran`,N=`https://wa.me/?text=${encodeURIComponent(s)}`;window.open(N,"_blank")},className:"flex items-center gap-1 text-green-500 hover:text-green-700 hover:shadow-sm transition-all duration-300 px-3 py-1.5 rounded-lg bg-green-50/70 hover:bg-green-100 border border-green-200",title:"Bagikan ke WhatsApp",children:[e.jsx(W,{className:"text-lg"}),e.jsx("span",{children:"Bagikan"})]}),e.jsxs("a",{href:`/surah/${a.surah_number}/${a.ayah_number}`,className:"flex items-center gap-1 text-green-600 hover:text-green-800 hover:shadow-sm transition-all duration-300 px-3 py-1.5 rounded-lg bg-green-50/70 hover:bg-green-100 border border-green-200 font-medium",children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),"Lihat Detail"]})]})]})]})}l.memo(B);function ae(){const a=Z(),b=new URLSearchParams(a.search),d=b.get("q")||"",p=parseInt(b.get("page"))||1,[v,k]=l.useState([]),[y,f]=l.useState(!1),[o,S]=l.useState(!1),[A,P]=l.useState(null),[i,I]=l.useState(p),[s,x]=l.useState(1),[N,h]=l.useState(0),[j,C]=l.useState(null),[c,_]=l.useState(null),[w,u]=l.useState(!1),[R,$]=l.useState(null),[q,F]=l.useState([]);l.useEffect(()=>{if(!d)return;f(!0);const r=p;T(`/api/search?q=${encodeURIComponent(d)}&per_page=10&page=${r}`).then(n=>{if(!n.ok)throw new Error("Failed to fetch search results");return n.json()}).then(n=>{n.status==="success"?(k(n.data||[]),C(n.pagination),x(n.pagination?.last_page||1),h(n.pagination?.total||0),I(n.pagination?.current_page||1),r>1&&window.scrollTo({top:0,behavior:"smooth"})):P("Gagal memuat hasil pencarian"),f(!1),S(!1)}).catch(n=>{P(n.message),f(!1),S(!1)})},[d,p]),l.useEffect(()=>{T("/api/surahs").then(r=>r.json()).then(r=>{r.status==="success"&&F(r.data)}).catch(r=>console.error("Error loading surahs:",r))},[]),l.useEffect(()=>()=>{c&&(c.pause(),_(null),u(!1),$(null))},[c]);const Q=r=>{let n=null;if(r.audio_urls){const t=typeof r.audio_urls=="string"?JSON.parse(r.audio_urls):r.audio_urls;typeof t=="object"&&!Array.isArray(t)?n=Object.values(t)[0]:Array.isArray(t)&&(n=t[0])}else r.audio_url&&(n=r.audio_url);if(!n){console.warn("No audio URL found for ayah:",r);return}if(c&&R===r.id)if(w){c.pause(),u(!1);return}else{const t=c.play();t!==void 0&&t.then(()=>{u(!0)}).catch(m=>{console.error("Failed to resume audio:",m),g()});return}c&&(c.pause(),u(!1)),g();function g(){const t=new Audio(n);t.addEventListener("ended",()=>{u(!1),$(null)}),t.addEventListener("error",E=>{console.error("Audio playback error:",E),u(!1),$(null)});const m=t.play();m!==void 0&&m.then(()=>{_(t),$(r.id),u(!0)}).catch(E=>{console.error("Failed to play audio:",E),u(!1),$(null)})}},M=r=>{S(!0);const n=new URLSearchParams(a.search);n.set("page",r),window.location.href=`/search?${n.toString()}`};return d?y&&i===1?e.jsx(L,{isLoading:!0,children:e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-green-50 via-white to-emerald-50",children:e.jsx("div",{className:"flex justify-center items-center h-64 pt-24",children:e.jsxs("div",{className:"text-center",children:[e.jsx(G,{size:"lg"}),e.jsx("p",{className:"text-green-600 font-medium mt-4",children:"Mencari ayat..."})]})})})}):A?e.jsx(L,{children:e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-green-50 via-white to-emerald-50",children:e.jsx("div",{className:"max-w-2xl mx-auto px-4 py-8 pt-24",children:e.jsx("div",{className:"bg-gradient-to-br from-red-50 to-pink-50 border border-red-200 text-red-700 p-6 rounded-xl shadow-lg",role:"alert",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"text-2xl",children:"‚ö†Ô∏è"}),e.jsxs("div",{children:[e.jsx("strong",{className:"font-bold",children:"Kesalahan! "}),e.jsx("span",{className:"block sm:inline",children:A})]})]})})})})}):e.jsx(L,{children:e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-green-50 via-white to-emerald-50",children:e.jsxs("div",{className:"max-w-6xl mx-auto px-4 py-8 pt-24 pb-20",children:[e.jsx(H,{title:`Hasil Pencarian: ${d} | Al-Quran Digital Indonesia`,description:`Hasil pencarian untuk "${d}" dalam Al-Quran. Menemukan ${N} ayat yang sesuai dengan kata kunci Anda.`,keywords:`cari ayat quran ${d}, pencarian al quran, ${d} dalam quran, al quran digital`,canonicalUrl:`https://my.indoquran.web.id/search?q=${encodeURIComponent(d)}`}),v.length>0&&e.jsx(J,{type:"SearchResults",data:{query:d,results:v}}),e.jsx(U,{className:"mb-8"}),e.jsxs("div",{className:"bg-white rounded-3xl shadow-xl p-8 mb-8 border border-green-100",children:[e.jsxs("div",{className:"mb-6",children:[e.jsxs("h1",{className:"text-3xl font-bold text-green-800 mb-3",children:['Hasil Pencarian: "',d,'"']}),e.jsx("p",{className:"text-green-600 text-lg",children:j?e.jsxs(e.Fragment,{children:["Menampilkan ",j.from,"-",j.to," dari ",j.total," hasil dalam bahasa Indonesia",s>1&&` (Halaman ${i} dari ${s})`]}):`Ditemukan ${v.length} hasil dalam bahasa Indonesia`})]}),e.jsx("div",{className:"mt-6",children:e.jsx(z,{surahs:q,placeholder:"Cari ayat atau kata kunci lainnya...",theme:"islamic",className:"w-full"})})]}),v.length===0?e.jsx("div",{className:"bg-gradient-to-br from-yellow-50 to-amber-50 border border-yellow-200 text-yellow-800 px-6 py-4 rounded-xl shadow-sm",role:"alert",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"text-2xl",children:"üîç"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold",children:"Tidak ditemukan hasil"}),e.jsxs("p",{className:"text-sm",children:['Tidak ditemukan hasil untuk kata kunci "',d,'". Coba gunakan kata kunci lain.']})]})]})}):e.jsx("div",{className:"space-y-6",children:v.map(r=>e.jsx(B,{ayah:r,surah:r.surah,highlightText:d,playAudio:Q,isPlaying:R===r.id&&w,activeAyah:R},r.id))}),s>1&&e.jsxs("div",{className:"mt-12 space-y-6",children:[e.jsx("div",{className:"text-center",children:e.jsx("div",{className:"inline-flex items-center px-6 py-3 bg-gradient-to-r from-green-50 to-emerald-50 rounded-full border border-green-200 shadow-sm",children:e.jsxs("span",{className:"text-sm font-medium text-green-700",children:["Halaman ",e.jsx("span",{className:"font-bold text-green-800",children:i})," dari ",e.jsx("span",{className:"font-bold text-green-800",children:s})]})})}),e.jsx("div",{className:"flex justify-center",children:e.jsxs("nav",{className:"flex items-center space-x-2 bg-white rounded-xl shadow-lg border border-green-100 p-2","aria-label":"Pagination",children:[e.jsxs("button",{onClick:()=>M(Math.max(1,i-1)),disabled:i===1||o,className:`flex items-center px-4 py-3 rounded-lg text-sm font-medium transition-all duration-200 ${i===1||o?"bg-gray-50 text-gray-400 cursor-not-allowed border border-gray-200":"bg-white text-green-700 hover:bg-green-50 hover:text-green-800 border border-green-200 hover:border-green-300 shadow-sm hover:shadow-md"}`,children:[o?e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-2 border-current border-t-transparent mr-2"}):e.jsx("svg",{className:"h-4 w-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M15 19l-7-7 7-7"})}),e.jsx("span",{className:"hidden sm:inline",children:"Sebelumnya"}),e.jsx("span",{className:"sm:hidden",children:"Prev"})]}),(()=>{const r=[];let g,t;s<=5?(g=1,t=s):i<=3?(g=1,t=5):i+2>=s?(g=s-5+1,t=s):(g=i-2,t=i+2);for(let m=g;m<=t;m++)r.push(e.jsx("button",{onClick:()=>M(m),disabled:o,className:`px-4 py-3 min-w-[44px] text-sm font-medium rounded-lg transition-all duration-200 border ${i===m?"bg-gradient-to-r from-green-600 to-emerald-600 text-white border-green-600 shadow-lg ring-2 ring-green-200 font-bold":o?"bg-gray-50 text-gray-400 cursor-not-allowed border-gray-200":"bg-white text-green-700 hover:bg-green-50 hover:text-green-800 border-green-200 hover:border-green-300 shadow-sm hover:shadow-md hover:scale-105"}`,children:m},m));return t<s&&(t<s-1&&r.push(e.jsx("span",{className:"px-3 py-3 text-green-500 bg-green-50 border border-green-200 rounded-lg",children:"..."},"ellipsis")),r.push(e.jsx("button",{onClick:()=>M(s),disabled:o,className:`px-4 py-3 min-w-[44px] text-sm font-medium rounded-lg border transition-all duration-200 ${i===s?"bg-gradient-to-r from-green-600 to-emerald-600 text-white border-green-600 shadow-lg ring-2 ring-green-200 font-bold":o?"bg-gray-50 text-gray-400 cursor-not-allowed border-gray-200":"bg-white text-green-700 hover:bg-green-50 hover:text-green-800 border-green-200 hover:border-green-300 shadow-sm hover:shadow-md hover:scale-105"}`,children:s},s))),r})(),e.jsxs("button",{onClick:()=>M(Math.min(s,i+1)),disabled:i===s||o,className:`flex items-center px-4 py-3 rounded-lg text-sm font-medium transition-all duration-200 ${i===s||o?"bg-gray-50 text-gray-400 cursor-not-allowed border border-gray-200":"bg-white text-green-700 hover:bg-green-50 hover:text-green-800 border border-green-200 hover:border-green-300 shadow-sm hover:shadow-md"}`,children:[e.jsx("span",{className:"hidden sm:inline",children:"Selanjutnya"}),e.jsx("span",{className:"sm:hidden",children:"Next"}),o?e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-2 border-current border-t-transparent ml-2"}):e.jsx("svg",{className:"h-4 w-4 ml-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 5l7 7-7 7"})})]})]})})]})]})})}):e.jsx(L,{children:e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-green-50 via-white to-emerald-50",children:e.jsxs("div",{className:"max-w-4xl mx-auto px-4 py-8 pt-24",children:[e.jsx(H,{title:"Pencarian Al-Quran | Cari Ayat dalam Al-Quran",description:"Cari ayat dalam Al-Quran berdasarkan terjemahan Bahasa Indonesia dengan mudah dan cepat.",keywords:"cari ayat quran, pencarian al quran, search al quran, al quran digital, cari terjemahan quran",canonicalUrl:"https://my.indoquran.web.id/search"}),e.jsx(U,{className:"mb-12"}),e.jsxs("div",{className:"bg-white rounded-3xl shadow-xl p-10 border border-green-100 text-center mb-10",children:[e.jsx("div",{className:"text-6xl mb-6",children:"üîç"}),e.jsx("h1",{className:"text-4xl font-bold text-green-800 mb-4",children:"Pencarian Al-Quran"}),e.jsx("p",{className:"text-green-600 text-xl mb-8",children:"Cari ayat dalam Al-Quran berdasarkan terjemahan Bahasa Indonesia"})]}),e.jsx("div",{className:"bg-white rounded-3xl shadow-xl p-8 border border-green-100 mb-10",children:e.jsx(z,{surahs:q,placeholder:"Masukkan kata kunci pencarian...",theme:"islamic",className:"w-full"})}),e.jsxs("div",{className:"bg-gradient-to-br from-green-50 to-emerald-50 rounded-2xl p-8 shadow-lg border border-green-100",children:[e.jsxs("h2",{className:"text-2xl font-semibold text-green-800 mb-6 flex items-center gap-3",children:[e.jsx("div",{className:"text-3xl",children:"üí°"}),"Tips Pencarian"]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-4 text-green-700",children:[e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"text-green-600 mt-1",children:"‚Ä¢"}),e.jsx("span",{children:"Gunakan kata kunci spesifik untuk hasil yang lebih akurat"})]}),e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"text-green-600 mt-1",children:"‚Ä¢"}),e.jsx("span",{children:"Cari berdasarkan kata atau frasa dalam terjemahan Bahasa Indonesia"})]})]}),e.jsxs("div",{className:"space-y-4 text-green-700",children:[e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"text-green-600 mt-1",children:"‚Ä¢"}),e.jsx("span",{children:"Untuk pencarian lebih dari satu kata, sistem akan mencari ayat yang mengandung semua kata tersebut"})]}),e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"text-green-600 mt-1",children:"‚Ä¢"}),e.jsx("span",{children:"Pencarian tidak case sensitive (huruf besar dan kecil dianggap sama)"})]})]})]})]})]})})})}export{ae as default};
