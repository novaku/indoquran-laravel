import{k as _,u as S,a as C,r as l,j as e,L as B,S as E}from"./index-CyKsVLCQ.js";import{f as A,g as o,h as L,i as I,j as $}from"./index-kvk17Cg3.js";import"./vendor-CcCrBLU2.js";/* empty css            */const D=async(r=!1)=>{try{const d=await _(r?"/api/penanda?favorites_only=true":"/api/penanda");if(!d.ok)throw new Error("Failed to get bookmarks");return(await d.json()).data}catch(n){throw console.error("Error getting bookmarks:",n),n}};function P(){const r=S(),{user:n}=C(),[d,m]=l.useState([]),[g,h]=l.useState(!0),[t,y]=l.useState(""),[x,j]=l.useState(null),[u,p]=l.useState({});l.useEffect(()=>{if(!n){r("/masuk");return}b()},[n]);const b=async()=>{try{h(!0);const a=await D();m(a||[])}catch(a){console.error("Error loading bookmarks:",a),j("Gagal memuat penanda. Silakan coba lagi.")}finally{h(!1)}},f=(a,s)=>{r(`/surah/${a}/${s}`)},N=a=>{p(s=>({...s,[a]:!s[a]}))},c=d.filter(a=>{if(!t)return!0;const s=t.toLowerCase();return a.surah_name?.toLowerCase().includes(s)||a.ayah_text?.toLowerCase().includes(s)||a.ayah_translation?.toLowerCase().includes(s)}),v=c.reduce((a,s)=>{const i=`${s.surah_number}-${s.surah_name}`;return a[i]||(a[i]={surah_number:s.surah_number,surah_name:s.surah_name,ayahs:[]}),a[i].ayahs.push(s),a},{}),w=Object.values(v).sort((a,s)=>a.surah_number-s.surah_number).map(a=>({...a,ayahs:a.ayahs.sort((s,i)=>s.ayah_number-i.ayah_number)}));return g?e.jsx("div",{className:"min-h-screen flex items-center justify-center",children:e.jsx(B,{size:"lg"})}):e.jsxs(e.Fragment,{children:[e.jsx(E,{title:"Penanda Saya - IndoQuran",description:"Kelola ayat-ayat Al-Quran yang telah Anda tandai"}),e.jsxs("div",{className:"min-h-screen bg-gray-50 pt-16",children:[e.jsx("div",{className:"bg-white shadow-sm border-b",children:e.jsxs("div",{className:"max-w-4xl mx-auto px-4 py-4",children:[e.jsx("div",{className:"flex items-center gap-4 mb-4",children:e.jsxs("button",{onClick:()=>r("/"),className:"flex items-center gap-2 text-gray-600 hover:text-gray-800 transition-colors",children:[e.jsx(A,{className:"w-5 h-5"}),e.jsx("span",{children:"Kembali"})]})}),e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx(o,{className:"w-6 h-6 text-green-600"}),e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Penanda Saya"})]}),e.jsxs("div",{className:"relative",children:[e.jsx(L,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),e.jsx("input",{type:"text",placeholder:"Cari ayat yang ditandai...",value:t,onChange:a=>y(a.target.value),className:"w-full pl-10 pr-4 py-3 border border-gray-200 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent"})]})]})}),e.jsxs("div",{className:"max-w-4xl mx-auto px-4 py-6",children:[x&&e.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 mb-6",children:e.jsx("p",{className:"text-red-800",children:x})}),c.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(o,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:t?"Tidak ada hasil":"Belum ada penanda"}),e.jsx("p",{className:"text-gray-500 mb-6",children:t?"Coba gunakan kata kunci yang berbeda":"Mulai menandai ayat-ayat favorit Anda"}),!t&&e.jsx("button",{onClick:()=>r("/"),className:"bg-green-600 text-white px-6 py-3 rounded-lg hover:bg-green-700 transition-colors",children:"Jelajahi Al-Quran"})]}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("p",{className:"text-sm text-gray-600 mb-4",children:[c.length," ayat ditandai",t&&` dari "${t}"`]}),w.map(a=>e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden",children:[e.jsx("div",{className:"bg-green-50 border-b border-green-100 px-6 py-4 cursor-pointer hover:bg-green-100 transition-colors",onClick:()=>N(a.surah_number),children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"bg-green-600 text-white w-8 h-8 rounded-full flex items-center justify-center text-sm font-bold",children:a.surah_number}),e.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:a.surah_name||`Surah ${a.surah_number}`}),e.jsxs("span",{className:"text-sm text-gray-600",children:["(",a.ayahs.length," ayat ditandai)"]})]}),e.jsx("div",{className:"flex items-center gap-2",children:u[a.surah_number]?e.jsx(I,{className:"w-5 h-5 text-gray-500"}):e.jsx($,{className:"w-5 h-5 text-gray-500"})})]})}),u[a.surah_number]&&e.jsx("div",{className:"divide-y divide-gray-100",children:a.ayahs.map(s=>e.jsxs("div",{className:"p-6 hover:bg-gray-50 transition-colors cursor-pointer",onClick:()=>f(s.surah_number,s.ayah_number),children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("div",{className:"flex items-center gap-3",children:e.jsxs("div",{className:"bg-green-100 text-green-800 px-3 py-1 rounded-full text-sm font-medium",children:["Ayat ",s.ayah_number]})}),e.jsx(o,{className:"w-5 h-5 text-green-600"})]}),s.ayah_text&&e.jsx("div",{className:"mb-4 p-4 bg-gray-50 rounded-lg",children:e.jsx("p",{className:"text-right text-2xl leading-loose font-arabic text-gray-900",children:s.ayah_text})}),s.ayah_translation&&e.jsx("div",{className:"mb-4",children:e.jsx("p",{className:"text-gray-700 leading-relaxed",children:s.ayah_translation})}),s.notes&&e.jsx("div",{className:"mt-4 p-3 bg-yellow-50 border-l-4 border-yellow-400",children:e.jsxs("p",{className:"text-sm text-gray-700",children:[e.jsx("span",{className:"font-medium",children:"Catatan: "}),s.notes]})}),s.created_at&&e.jsxs("div",{className:"mt-4 text-xs text-gray-500",children:["Ditandai pada: ",new Date(s.created_at).toLocaleDateString("id-ID",{year:"numeric",month:"long",day:"numeric"})]})]},s.id))})]},`surah-${a.surah_number}`))]})]})]})]})}export{P as default};
