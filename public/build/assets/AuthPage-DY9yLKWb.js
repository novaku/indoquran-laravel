import{m as y,u as w,g as j,r as o,j as e,L as g}from"./index-C5kc8NYm.js";import"./vendor-DavUf6mE.js";function v(){const{action:x}=y(),c=w(),{login:p}=j(),[r,h]=o.useState({name:"",email:"",password:"",password_confirmation:""}),[a,d]=o.useState({}),[m,l]=o.useState(!1),[u,f]=o.useState(!1),s=x==="login";o.useEffect(()=>{if(u){const n=setTimeout(()=>{c("/",{replace:!0})},150);return()=>{clearTimeout(n)}}},[u,c]);const i=n=>{h({...r,[n.target.name]:n.target.value})},b=async n=>{n.preventDefault(),l(!0),d({});try{const t=await p(r,!s);t.success?(l(!1),setTimeout(()=>{f(!0)},500)):(console.error(`❌ [AuthPage] ${s?"Login":"Register"} failed:`,t.error),d(t.errors||{message:t.error}),l(!1))}catch(t){console.error(`❌ [AuthPage] ${s?"Login":"Register"} error:`,t),d({message:"Terjadi kesalahan. Silakan coba lagi."}),l(!1)}};return e.jsxs("div",{className:"max-w-md mx-auto px-4 py-8 pt-24 pb-20",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-800 mb-2",children:s?"Masuk ke Akun Anda":"Buat Akun Baru"}),e.jsx("p",{className:"text-gray-600",children:s?"Masuk untuk mengakses pengalaman Al-Quran yang personal":"Bergabunglah dengan kami untuk meningkatkan pengalaman membaca Al-Quran"})]}),a.message&&e.jsx("div",{className:"mb-4 bg-red-50 border-l-4 border-red-500 text-red-700 p-4 rounded-lg",children:e.jsx("span",{className:"block sm:inline",children:a.message})}),e.jsxs("form",{onSubmit:b,encType:"application/x-www-form-urlencoded",className:"bg-white shadow-lg rounded-lg p-8 border border-gray-200",children:[!s&&e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-gray-700 text-sm font-bold mb-2",htmlFor:"name",children:"Nama"}),e.jsx("input",{id:"name",type:"text",name:"name",value:r.name,onChange:i,className:`appearance-none border rounded-lg w-full py-3 px-4 text-gray-700 leading-tight focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-green-500 ${a.name?"border-red-500":"border-gray-300"}`,placeholder:"Nama lengkap Anda"}),a.name&&e.jsx("p",{className:"text-red-600 text-xs mt-1",children:a.name})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-gray-700 text-sm font-bold mb-2",htmlFor:"email",children:"Email"}),e.jsx("input",{id:"email",type:"email",name:"email",value:r.email,onChange:i,className:`appearance-none border rounded-lg w-full py-3 px-4 text-gray-700 leading-tight focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-green-500 ${a.email?"border-red-500":"border-gray-300"}`,placeholder:"Alamat email Anda"}),a.email&&e.jsx("p",{className:"text-red-600 text-xs mt-1",children:a.email})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-gray-700 text-sm font-bold mb-2",htmlFor:"password",children:"Kata Sandi"}),e.jsx("input",{id:"password",type:"password",name:"password",value:r.password,onChange:i,className:`appearance-none border rounded-lg w-full py-3 px-4 text-gray-700 leading-tight focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-green-500 ${a.password?"border-red-500":"border-gray-300"}`,placeholder:"Kata sandi Anda"}),a.password&&e.jsx("p",{className:"text-red-600 text-xs mt-1",children:a.password})]}),!s&&e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"block text-gray-700 text-sm font-bold mb-2",htmlFor:"password_confirmation",children:"Konfirmasi Kata Sandi"}),e.jsx("input",{id:"password_confirmation",type:"password",name:"password_confirmation",value:r.password_confirmation,onChange:i,className:"appearance-none border border-gray-300 rounded-lg w-full py-3 px-4 text-gray-700 leading-tight focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-green-500",placeholder:"Konfirmasi kata sandi Anda"})]}),e.jsx("div",{className:"flex items-center justify-between mb-4",children:e.jsx("button",{type:"submit",disabled:m,className:"bg-green-600 hover:bg-green-700 disabled:bg-gray-400 text-white font-bold py-3 px-6 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500 focus:ring-offset-2 shadow-lg hover:shadow-xl transition-all duration-300 w-full flex justify-center items-center",children:m?e.jsxs("svg",{className:"animate-spin h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}):s?"Masuk":"Daftar"})}),e.jsx("div",{className:"text-center text-gray-600 text-sm",children:s?e.jsxs(e.Fragment,{children:["Belum punya akun?"," ",e.jsx(g,{to:"/auth/register",className:"text-green-600 hover:text-green-800 font-semibold hover:underline",children:"Daftar"})]}):e.jsxs(e.Fragment,{children:["Sudah punya akun?"," ",e.jsx(g,{to:"/auth/login",className:"text-green-600 hover:text-green-800 font-semibold hover:underline",children:"Masuk"})]})})]})]})}export{v as default};
