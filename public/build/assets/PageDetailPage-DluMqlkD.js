import{g as U,m as z,u as L,r,f as B,j as e,P as p,k as J,S as M,x as v,a4 as T,q as Z,s as D,t as K,w as W,v as G,y as V}from"./index-C_YPeou3.js";import"./vendor-DavUf6mE.js";function te(){const{user:X}=U(),{number:n}=z(),o=L(),[l,w]=r.useState(null),[k,j]=r.useState(!0),[f,x]=r.useState(null),[N,Y]=r.useState(604),[g,A]=r.useState(""),[P,d]=r.useState(!1),[i,c]=r.useState(null),[S,u]=r.useState(null),[m,h]=r.useState(2.5),_=r.useRef(null);r.useEffect(()=>{n&&I(n)},[n]);const I=async s=>{try{j(!0),x(null);const t=await(await B(`/api/pages/${s}`)).json();t.status==="success"?w(t.data):x(t.message||"Failed to load page data")}catch(a){console.error("Error loading page data:",a),x("Failed to load page data. Please try again.")}finally{j(!1)}};r.useEffect(()=>{if(l?.surahs?.length>0){const s=l.surahs[0].ayahs[0];if(s?.audio_urls){const a=typeof s.audio_urls=="string"?JSON.parse(s.audio_urls):s.audio_urls;let t;if(Array.isArray(a)){const b=["alafasy","sudais","husary","minshawi","abdulbasit","maher","ghamdi","shuraim","ajmy","walk"];t=a.map((ee,y)=>b[y]||`qari_${y+1}`)}else t=Object.keys(a);t.length>0&&!g&&A(t[0])}}},[l,g]),r.useEffect(()=>()=>{i&&(i.pause(),d(!1),c(null))},[]);const C=r.useCallback(()=>{h(s=>Math.min(s+.25,6))},[]),O=r.useCallback(()=>{h(s=>Math.max(s-.25,1.5))},[]),$=r.useCallback(()=>{h(2.5)},[]),E=()=>{const s=parseInt(n);s>1&&o(`/pages/${s-1}`,{replace:!0})},H=()=>{const s=parseInt(n);s<N&&o(`/pages/${s+1}`,{replace:!0})},F=(s,a)=>{i&&(i.pause(),d(!1),u(null));const t=new Audio(s);_.current=t,t.play().then(()=>{d(!0),c(t),u(a),t.onended=()=>{d(!1),c(null),u(null)}}).catch(b=>{console.error("Audio playback error:",b)})},Q=()=>{i&&(i.pause(),d(!1),c(null),u(null))},R=s=>{if(!s.audio_urls)return null;const a=typeof s.audio_urls=="string"?JSON.parse(s.audio_urls):s.audio_urls;return Array.isArray(a)?a[0]:typeof a=="object"?a[g]||Object.values(a)[0]:null};if(k)return e.jsx(p,{isLoading:!0,children:e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-green-50 via-white to-emerald-50",children:e.jsx("div",{className:"max-w-6xl mx-auto px-4 py-8 pt-24 pb-20",children:e.jsx("div",{className:"flex justify-center items-center h-64",children:e.jsx(J,{size:"lg"})})})})});if(f)return e.jsx(p,{children:e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-green-50 via-white to-emerald-50",children:e.jsx("div",{className:"max-w-6xl mx-auto px-4 py-8 pt-24 pb-20",children:e.jsx("div",{className:"bg-white rounded-3xl shadow-xl p-8 border border-red-100",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-red-500 text-6xl mb-4",children:"⚠️"}),e.jsx("h2",{className:"text-2xl font-bold text-red-800 mb-2",children:"Error"}),e.jsx("p",{className:"text-red-600 mb-4",children:f}),e.jsx("button",{onClick:()=>o(-1),className:"bg-red-500 text-white px-6 py-3 rounded-lg hover:bg-red-600 transition-colors",children:"Kembali"})]})})})})});if(!l)return null;const q={title:`Halaman ${n} Al-Quran - IndoQuran`,description:`Baca Halaman ${n} Al-Quran lengkap dengan terjemahan bahasa Indonesia, audio murottal, dan tafsir. ${l.total_ayahs} ayat tersedia untuk dipelajari.`,keywords:`halaman ${n}, al quran halaman ${n}, terjemahan halaman ${n}, quran digital, al quran indonesia`};return e.jsxs(p,{children:[e.jsx(M,{...q}),e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-green-50 via-white to-emerald-50",children:e.jsxs("div",{className:"max-w-6xl mx-auto px-4 py-8 pt-24 pb-20",children:[e.jsxs("div",{className:"bg-white rounded-3xl shadow-xl p-8 mb-8 border border-green-100",children:[e.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[e.jsx("button",{onClick:()=>o(-1),className:"p-2 rounded-lg bg-green-50 text-green-700 hover:bg-green-100 hover:text-green-800 transition-all duration-200 border border-green-200",children:e.jsx(v,{className:"text-xl"})}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"flex items-center justify-center w-12 h-12 bg-gradient-to-r from-green-600 to-emerald-600 text-white rounded-xl",children:e.jsx(T,{className:"text-2xl"})}),e.jsxs("div",{children:[e.jsxs("h1",{className:"text-3xl font-bold text-green-800",children:["Halaman ",n]}),e.jsxs("p",{className:"text-green-600",children:[l.total_ayahs," ayat dari ",l.surahs.length," surah"]})]})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"text-sm text-gray-600",children:["Menampilkan teks Arab dari Halaman ",n]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-sm text-gray-600 mr-2",children:"Ukuran Teks:"}),e.jsx("button",{onClick:O,disabled:m<=1.5,className:"p-2 rounded-md bg-white border border-green-200 text-green-700 hover:bg-green-50 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",title:"Perkecil teks Arab",children:e.jsx(Z,{className:"w-4 h-4"})}),e.jsx("button",{onClick:$,className:"px-3 py-2 rounded-md bg-white border border-green-200 text-green-700 hover:bg-green-50 transition-colors text-xs font-medium",title:"Reset ukuran teks Arab",children:e.jsx(D,{className:"w-4 h-4"})}),e.jsx("button",{onClick:C,disabled:m>=6,className:"p-2 rounded-md bg-white border border-green-200 text-green-700 hover:bg-green-50 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",title:"Perbesar teks Arab",children:e.jsx(K,{className:"w-4 h-4"})})]})]})]}),e.jsx("div",{className:"space-y-8",children:l.surahs.map(s=>e.jsxs("div",{className:"bg-white rounded-3xl shadow-xl border border-green-100 overflow-hidden",children:[e.jsx("div",{className:"bg-gradient-to-r from-green-600 to-emerald-600 text-white p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold mb-1",children:s.surah.name_latin}),e.jsx("p",{className:"text-green-100 text-lg",children:s.surah.name_arabic})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"text-sm text-green-200",children:"Surah"}),e.jsxs("div",{className:"text-2xl font-bold",children:["#",s.surah.number]})]})]})}),e.jsx("div",{className:"p-6",children:e.jsx("div",{className:"space-y-6",children:s.ayahs.map(a=>e.jsxs("div",{className:"group",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"flex items-center justify-center w-8 h-8 bg-green-100 text-green-700 rounded-full text-sm font-semibold",children:a.ayah_number}),e.jsxs("span",{className:"text-sm text-gray-600",children:["Ayat ",a.ayah_number]})]}),e.jsx("button",{onClick:()=>o(`/surah/${a.surah_number}/${a.ayah_number}`),className:"opacity-0 group-hover:opacity-100 transition-opacity text-green-600 hover:text-green-800 text-sm font-medium",children:"Lihat Detail →"})]}),e.jsx("div",{className:"bg-green-50/70 rounded-2xl p-6 text-center",children:e.jsx("p",{className:"text-right leading-relaxed font-arabic text-gray-800",style:{fontSize:`${m}rem`,lineHeight:m>3?"1.8":"1.6",fontFeatureSettings:"'calt', 'liga', 'dlig', 'clig'"},dir:"rtl",children:a.text_arabic})}),e.jsx("div",{className:"mt-4 flex items-center justify-end gap-2 opacity-0 group-hover:opacity-100 transition-opacity",children:a.audio_urls&&e.jsx(e.Fragment,{children:P&&S===a.id?e.jsx("button",{onClick:Q,className:"p-2 rounded-md bg-green-50 text-green-700 hover:bg-green-100 transition-colors border border-green-200",title:"Jeda Audio",children:e.jsx(W,{className:"w-5 h-5"})}):e.jsx("button",{onClick:()=>{const t=R(a);t&&F(t,a.id)},className:"p-2 rounded-md bg-green-50 text-green-700 hover:bg-green-100 transition-colors border border-green-200",title:"Putar Audio",children:e.jsx(G,{className:"w-5 h-5"})})})})]},`${a.surah_number}-${a.ayah_number}`))})})]},s.surah.number))}),e.jsxs("div",{className:"mt-8 flex justify-between",children:[e.jsxs("button",{onClick:E,disabled:parseInt(n)<=1,className:"flex items-center gap-2 px-6 py-3 rounded-lg bg-green-600 text-white font-medium disabled:opacity-50 hover:bg-green-700 transition-colors",children:[e.jsx(v,{className:"w-5 h-5"}),"Halaman Sebelumnya"]}),e.jsxs("button",{onClick:H,disabled:parseInt(n)>=N,className:"flex items-center gap-2 px-6 py-3 rounded-lg bg-green-600 text-white font-medium disabled:opacity-50 hover:bg-green-700 transition-colors",children:["Halaman Selanjutnya",e.jsx(V,{className:"w-5 h-5"})]})]})]})})]})}export{te as default};
