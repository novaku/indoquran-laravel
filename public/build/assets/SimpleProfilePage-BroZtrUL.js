import{u as _,a as P,r as l,j as e,S as C,L as I,l as O}from"./index-RP1VPulh.js";import{f as E,k as F,l as b,m as f,n as A,o as K}from"./index-DJzlOEGo.js";import"./vendor-CcCrBLU2.js";/* empty css            */function B(){const c=_(),{user:m,logout:y,updateUser:N}=P(),[n,p]=l.useState({name:"",email:"",current_password:"",password:"",password_confirmation:""}),[w,j]=l.useState(!1),[u,x]=l.useState(null),[s,g]=l.useState({}),[o,v]=l.useState({current:!1,new:!1,confirm:!1});l.useEffect(()=>{if(!m){c("/masuk");return}p(r=>({...r,name:m.name||"",email:m.email||""}))},[m,c]);const i=r=>{const{name:a,value:t}=r.target;p(d=>({...d,[a]:t})),s[a]&&g(d=>({...d,[a]:null}))},k=async r=>{r.preventDefault(),j(!0),g({}),x(null);try{const a=await O("/api/profile",n);if(a.ok){const t=await a.json();N(t.user),x({type:"success",text:"Profil berhasil diperbarui!"}),p(d=>({...d,current_password:"",password:"",password_confirmation:""}))}else{const t=await a.json();t.errors?g(t.errors):x({type:"error",text:t.message||"Gagal memperbarui profil"})}}catch(a){console.error("Profile update error:",a),x({type:"error",text:"Terjadi kesalahan. Silakan coba lagi."})}finally{j(!1)}},S=async()=>{confirm("Apakah Anda yakin ingin keluar?")&&(await y(),c("/"))},h=r=>{v(a=>({...a,[r]:!a[r]}))};return e.jsxs(e.Fragment,{children:[e.jsx(C,{title:"Profil Saya - IndoQuran",description:"Kelola informasi akun dan preferensi Anda"}),e.jsxs("div",{className:"min-h-screen bg-gray-50 pt-16",children:[e.jsx("div",{className:"bg-white shadow-sm border-b",children:e.jsxs("div",{className:"max-w-2xl mx-auto px-4 py-4",children:[e.jsx("div",{className:"flex items-center gap-4 mb-4",children:e.jsxs("button",{onClick:()=>c("/"),className:"flex items-center gap-2 text-gray-600 hover:text-gray-800 transition-colors",children:[e.jsx(E,{className:"w-5 h-5"}),e.jsx("span",{children:"Kembali"})]})}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(F,{className:"w-6 h-6 text-green-600"}),e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Profil Saya"})]})]})}),e.jsxs("div",{className:"max-w-2xl mx-auto px-4 py-6",children:[u&&e.jsx("div",{className:`p-4 rounded-lg mb-6 ${u.type==="success"?"bg-green-50 border border-green-200 text-green-800":"bg-red-50 border border-red-200 text-red-800"}`,children:u.text}),e.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:e.jsxs("form",{onSubmit:k,className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Informasi Dasar"}),e.jsxs("div",{className:"grid gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700 mb-2",children:"Nama Lengkap"}),e.jsx("input",{type:"text",id:"name",name:"name",value:n.name,onChange:i,className:`w-full px-4 py-3 border rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent ${s.name?"border-red-300":"border-gray-200"}`,placeholder:"Masukkan nama lengkap"}),s.name&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:s.name[0]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-2",children:"Email"}),e.jsx("input",{type:"email",id:"email",name:"email",value:n.email,onChange:i,className:`w-full px-4 py-3 border rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent ${s.email?"border-red-300":"border-gray-200"}`,placeholder:"Masukkan alamat email"}),s.email&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:s.email[0]})]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Ubah Password"}),e.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Kosongkan bagian ini jika tidak ingin mengubah password"}),e.jsxs("div",{className:"grid gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"current_password",className:"block text-sm font-medium text-gray-700 mb-2",children:"Password Saat Ini"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:o.current?"text":"password",id:"current_password",name:"current_password",value:n.current_password,onChange:i,className:`w-full px-4 py-3 border rounded-lg pr-12 focus:ring-2 focus:ring-green-500 focus:border-transparent ${s.current_password?"border-red-300":"border-gray-200"}`,placeholder:"Masukkan password saat ini"}),e.jsx("button",{type:"button",onClick:()=>h("current"),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600",children:o.current?e.jsx(b,{className:"w-5 h-5"}):e.jsx(f,{className:"w-5 h-5"})})]}),s.current_password&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:s.current_password[0]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 mb-2",children:"Password Baru"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:o.new?"text":"password",id:"password",name:"password",value:n.password,onChange:i,className:`w-full px-4 py-3 border rounded-lg pr-12 focus:ring-2 focus:ring-green-500 focus:border-transparent ${s.password?"border-red-300":"border-gray-200"}`,placeholder:"Masukkan password baru"}),e.jsx("button",{type:"button",onClick:()=>h("new"),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600",children:o.new?e.jsx(b,{className:"w-5 h-5"}):e.jsx(f,{className:"w-5 h-5"})})]}),s.password&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:s.password[0]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"password_confirmation",className:"block text-sm font-medium text-gray-700 mb-2",children:"Konfirmasi Password Baru"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:o.confirm?"text":"password",id:"password_confirmation",name:"password_confirmation",value:n.password_confirmation,onChange:i,className:`w-full px-4 py-3 border rounded-lg pr-12 focus:ring-2 focus:ring-green-500 focus:border-transparent ${s.password_confirmation?"border-red-300":"border-gray-200"}`,placeholder:"Konfirmasi password baru"}),e.jsx("button",{type:"button",onClick:()=>h("confirm"),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600",children:o.confirm?e.jsx(b,{className:"w-5 h-5"}):e.jsx(f,{className:"w-5 h-5"})})]}),s.password_confirmation&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:s.password_confirmation[0]})]})]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 pt-6",children:[e.jsx("button",{type:"submit",disabled:w,className:"flex items-center justify-center gap-2 bg-green-600 text-white px-6 py-3 rounded-lg hover:bg-green-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:w?e.jsx(I,{size:"sm"}):e.jsxs(e.Fragment,{children:[e.jsx(A,{className:"w-5 h-5"}),e.jsx("span",{children:"Simpan Perubahan"})]})}),e.jsxs("button",{type:"button",onClick:S,className:"flex items-center justify-center gap-2 bg-red-600 text-white px-6 py-3 rounded-lg hover:bg-red-700 transition-colors",children:[e.jsx(K,{className:"w-5 h-5"}),e.jsx("span",{children:"Keluar"})]})]})]})})]})]})]})}export{B as default};
