import{m as Q,u as R,r as n,f as q,j as e,P as j,k as F,S as U,x as L,a4 as B,q as M,s as T,t as Z,w as H,v as D}from"./index-D-3d-D4f.js";import"./vendor-DavUf6mE.js";function V(){const{number:m}=Q(),x=R(),[a,v]=n.useState(null),[y,p]=n.useState(!0),[f,h]=n.useState(null),[o,g]=n.useState(2.5),[b,w]=n.useState(""),[k,d]=n.useState(!1),[i,c]=n.useState(null),[A,u]=n.useState(null),_=n.useRef(null);n.useEffect(()=>{m&&z(m)},[m]);const z=async r=>{try{p(!0),h(null);const s=await(await q(`/api/juz/${r}`)).json();s.status==="success"?v(s.data):h(s.message||"Failed to load Juz data")}catch(t){console.error("Error loading Juz data:",t),h("Failed to load Juz data. Please try again.")}finally{p(!1)}},S=n.useCallback(()=>{g(r=>Math.min(r+.25,6))},[]),I=n.useCallback(()=>{g(r=>Math.max(r-.25,1.5))},[]),O=n.useCallback(()=>{g(2.5)},[]);n.useEffect(()=>{if(a?.surahs?.length>0){const r=a.surahs[0];if(r.ayahs.length>0){const t=r.ayahs[0];if(t?.audio_urls){const s=typeof t.audio_urls=="string"?JSON.parse(t.audio_urls):t.audio_urls;let l;if(Array.isArray(s)){const E=["alafasy","sudais","husary","minshawi","abdulbasit","maher","ghamdi","shuraim","ajmy","walk"];l=s.map((K,N)=>E[N]||`qari_${N+1}`)}else l=Object.keys(s);l.length>0&&!b&&w(l[0])}}}},[a,b]),n.useEffect(()=>()=>{i&&(i.pause(),d(!1),c(null))},[]);const P=(r,t)=>{i&&(i.pause(),d(!1),u(null));const s=new Audio(r);_.current=s,s.play().then(()=>{d(!0),c(s),u(t),s.onended=()=>{d(!1),c(null),u(null)}}).catch(l=>{console.error("Audio playback error:",l)})},$=()=>{i&&(i.pause(),d(!1),c(null),u(null))},C=r=>{if(!r.audio_urls)return null;const t=typeof r.audio_urls=="string"?JSON.parse(r.audio_urls):r.audio_urls;return Array.isArray(t)?t[0]:typeof t=="object"?t[b]||Object.values(t)[0]:null};if(y)return e.jsx(j,{isLoading:!0,children:e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-green-50 via-white to-emerald-50",children:e.jsx("div",{className:"max-w-6xl mx-auto px-4 py-8 pt-24 pb-20",children:e.jsx("div",{className:"flex justify-center items-center h-64",children:e.jsx(F,{size:"lg"})})})})});if(f)return e.jsx(j,{children:e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-green-50 via-white to-emerald-50",children:e.jsx("div",{className:"max-w-6xl mx-auto px-4 py-8 pt-24 pb-20",children:e.jsx("div",{className:"bg-white rounded-3xl shadow-xl p-8 border border-red-100",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-red-500 text-6xl mb-4",children:"⚠️"}),e.jsx("h2",{className:"text-2xl font-bold text-red-800 mb-2",children:"Error"}),e.jsx("p",{className:"text-red-600 mb-4",children:f}),e.jsx("button",{onClick:()=>x(-1),className:"bg-red-500 text-white px-6 py-3 rounded-lg hover:bg-red-600 transition-colors",children:"Kembali"})]})})})})});if(!a)return null;const J={title:`Juz ${a.juz_number} - Al-Quran Digital - IndoQuran`,description:`Baca Juz ${a.juz_number} Al-Quran dengan teks Arab lengkap. Total ${a.total_ayahs} ayat dari ${a.surahs.length} surah. Platform Al-Quran digital terlengkap di Indonesia.`,keywords:`juz ${a.juz_number}, para ${a.juz_number}, al quran juz ${a.juz_number}, quran digital, teks arab, al quran indonesia`};return e.jsxs(j,{children:[e.jsx(U,{...J}),e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-green-50 via-white to-emerald-50",children:e.jsxs("div",{className:"max-w-6xl mx-auto px-4 py-8 pt-24 pb-20",children:[e.jsxs("div",{className:"bg-white rounded-3xl shadow-xl p-8 mb-8 border border-green-100",children:[e.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[e.jsx("button",{onClick:()=>x(-1),className:"p-2 rounded-lg bg-green-50 text-green-700 hover:bg-green-100 hover:text-green-800 transition-all duration-200 border border-green-200",children:e.jsx(L,{className:"text-xl"})}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"flex items-center justify-center w-12 h-12 bg-gradient-to-r from-green-600 to-emerald-600 text-white rounded-xl",children:e.jsx(B,{className:"text-2xl"})}),e.jsxs("div",{children:[e.jsxs("h1",{className:"text-3xl font-bold text-green-800",children:["Juz ",a.juz_number]}),e.jsxs("p",{className:"text-green-600",children:[a.total_ayahs," ayat dari ",a.surahs.length," surah"]})]})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"text-sm text-gray-600",children:["Menampilkan teks Arab dari Juz ",a.juz_number]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-sm text-gray-600 mr-2",children:"Ukuran Teks:"}),e.jsx("button",{onClick:I,disabled:o<=1.5,className:"p-2 rounded-md bg-white border border-green-200 text-green-700 hover:bg-green-50 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",title:"Perkecil teks Arab",children:e.jsx(M,{className:"w-4 h-4"})}),e.jsx("button",{onClick:O,className:"px-3 py-2 rounded-md bg-white border border-green-200 text-green-700 hover:bg-green-50 transition-colors text-xs font-medium",title:"Reset ukuran teks Arab",children:e.jsx(T,{className:"w-4 h-4"})}),e.jsx("button",{onClick:S,disabled:o>=6,className:"p-2 rounded-md bg-white border border-green-200 text-green-700 hover:bg-green-50 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",title:"Perbesar teks Arab",children:e.jsx(Z,{className:"w-4 h-4"})})]})]})]}),e.jsx("div",{className:"space-y-8",children:a.surahs.map((r,t)=>e.jsxs("div",{className:"bg-white rounded-3xl shadow-xl border border-green-100 overflow-hidden",children:[e.jsx("div",{className:"bg-gradient-to-r from-green-600 to-emerald-600 text-white p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold mb-1",children:r.surah.name_latin}),e.jsx("p",{className:"text-green-100 text-lg",children:r.surah.name_arabic})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"text-sm text-green-200",children:"Surah"}),e.jsxs("div",{className:"text-2xl font-bold",children:["#",r.surah.number]})]})]})}),e.jsx("div",{className:"p-6",children:e.jsx("div",{className:"space-y-6",children:r.ayahs.map(s=>e.jsxs("div",{className:"group",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"flex items-center justify-center w-8 h-8 bg-green-100 text-green-700 rounded-full text-sm font-semibold",children:s.ayah_number}),e.jsxs("span",{className:"text-sm text-gray-600",children:["Ayat ",s.ayah_number]})]}),e.jsx("button",{onClick:()=>x(`/surah/${s.surah_number}/${s.ayah_number}`),className:"opacity-0 group-hover:opacity-100 transition-opacity text-green-600 hover:text-green-800 text-sm font-medium",children:"Lihat Detail →"})]}),e.jsx("div",{className:"bg-green-50/70 rounded-2xl p-6 text-center",children:e.jsx("p",{className:"text-right leading-relaxed font-arabic text-gray-800",style:{fontSize:`${o}rem`,lineHeight:o>3?"1.8":"1.6"},dir:"rtl",children:s.text_arabic})}),e.jsx("div",{className:"mt-4 flex items-center justify-end gap-2 opacity-0 group-hover:opacity-100 transition-opacity",children:s.audio_urls&&e.jsx(e.Fragment,{children:k&&A===s.id?e.jsx("button",{onClick:$,className:"p-2 rounded-md bg-green-50 text-green-700 hover:bg-green-100 transition-colors border border-green-200",title:"Jeda Audio",children:e.jsx(H,{className:"w-5 h-5"})}):e.jsx("button",{onClick:()=>{const l=C(s);l&&P(l,s.id)},className:"p-2 rounded-md bg-green-50 text-green-700 hover:bg-green-100 transition-colors border border-green-200",title:"Putar Audio",children:e.jsx(D,{className:"w-5 h-5"})})})})]},`${s.surah_number}-${s.ayah_number}`))})})]},r.surah.number))})]})})]})}export{V as default};
