import{r as o,j as e,p as z,q as Q,s as B,A as D,C as F,f as O,P as L,M as E,L as V,i as W}from"./index-CaWC5dtw.js";import{Q as T}from"./QuranHeader-rUkjacgo.js";import"./vendor-BEN4boU2.js";function U({ayah:r,surah:b,playAudio:i,isPlaying:p,activeAyah:v,highlightText:k=null}){const[y,f]=o.useState(3),c=()=>{f(n=>Math.min(n+.5,6))},$=()=>{f(n=>Math.max(n-.5,1.5))},S=()=>{f(3)},C=()=>({fontSize:`${y}rem`}),l=n=>{if(!k||!n)return n;try{const h=document.createElement("div");h.innerHTML=n;const w=x=>{if(x.nodeType!==Node.TEXT_NODE){x.childNodes.length>0&&Array.from(x.childNodes).forEach(m=>{w(m)});return}const j=x.textContent,P=new RegExp(`(${k})`,"gi");if(P.test(j)){const m=j.replace(P,'<mark class="bg-accent-100 text-accent-800 px-1 rounded">$1</mark>'),A=document.createDocumentFragment(),N=document.createElement("div");for(N.innerHTML=m;N.firstChild;)A.appendChild(N.firstChild);x.parentNode.replaceChild(A,x)}};return Array.from(h.childNodes).forEach(x=>{w(x)}),h.innerHTML}catch(h){return console.error("Error highlighting text:",h),n}};if(!r)return null;const I=()=>{i&&i(r)};return e.jsxs("div",{className:"bg-white rounded-2xl shadow-xl hover:shadow-2xl transition-all duration-300 p-6 mb-6 border border-green-100",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"h-10 w-10 bg-gradient-to-r from-green-600 to-emerald-600 rounded-full flex items-center justify-center text-white font-bold mr-4 shadow-lg",children:r.ayah_number}),e.jsx("a",{href:`/surah/${r.surah_number}/${r.ayah_number}`,className:"text-green-700 hover:text-green-800 font-semibold text-lg transition-colors duration-200",children:b||r.surah?`Surah ${(b||r.surah).name_latin} (${r.surah_number}):${r.ayah_number}`:`Surah ${r.surah_number}:${r.ayah_number}`})]}),e.jsx("button",{onClick:I,className:`p-3 rounded-full hover:shadow-lg transition-all duration-300 ${p?"bg-gradient-to-r from-red-500 to-pink-500 hover:from-red-600 hover:to-pink-600":"bg-gradient-to-r from-green-600 to-emerald-600 hover:from-green-700 hover:to-emerald-700"} text-white shadow-md`,title:p?"Pause audio":"Play audio",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",viewBox:"0 0 20 20",fill:"currentColor",children:p?e.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8 7a1 1 0 00-1 1v4a1 1 0 001 1h4a1 1 0 001-1V8a1 1 0 00-1-1H8z",clipRule:"evenodd"}):e.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM9.555 7.168A1 1 0 008 8v4a1 1 0 001.555.832l3-2a1 1 0 000-1.664l-3-2z",clipRule:"evenodd"})})})]}),e.jsxs("div",{className:"text-right leading-relaxed font-arabic mb-6 text-green-800 bg-gradient-to-r from-green-50 to-emerald-50 rounded-xl border border-green-100 p-6 relative",children:[e.jsxs("div",{className:"absolute top-3 left-3 flex gap-1",children:[e.jsx("button",{onClick:$,disabled:y<=1.5,className:"p-1.5 rounded-md bg-white/80 border border-green-200 text-green-700 hover:bg-green-100 disabled:opacity-50 disabled:cursor-not-allowed transition-colors shadow-sm",title:"Perkecil teks Arab",children:e.jsx(z,{className:"w-4 h-4"})}),e.jsx("button",{onClick:S,className:"p-1.5 rounded-md bg-white/80 border border-green-200 text-green-700 hover:bg-green-100 transition-colors text-xs font-medium shadow-sm",title:"Reset ukuran teks Arab",children:e.jsx(Q,{className:"w-4 h-4"})}),e.jsx("button",{onClick:c,disabled:y>=6,className:"p-1.5 rounded-md bg-white/80 border border-green-200 text-green-700 hover:bg-green-100 disabled:opacity-50 disabled:cursor-not-allowed transition-colors shadow-sm",title:"Perbesar teks Arab",children:e.jsx(B,{className:"w-4 h-4"})})]}),e.jsx("div",{className:"font-arabic text-right leading-loose pt-8",style:C(),dir:"rtl",children:r.text_arabic})]}),e.jsxs("div",{className:"text-green-700 leading-relaxed mb-4 p-4 bg-green-50/70 rounded-xl border border-green-100",children:[e.jsx("div",{className:"text-sm font-medium text-green-800 mb-2",children:"Terjemahan Indonesia:"}),k?e.jsx("div",{className:"text-lg",dangerouslySetInnerHTML:{__html:l(r.text_indonesian)}}):e.jsx("div",{className:"text-lg",dangerouslySetInnerHTML:{__html:r.text_indonesian}})]}),r.text_latin&&e.jsxs("div",{className:"mb-4 p-4 bg-green-50/70 rounded-xl border border-green-100",children:[e.jsx("div",{className:"text-sm font-medium text-green-800 mb-2",children:"Transliterasi:"}),e.jsx("p",{className:"text-green-700 italic text-lg",children:r.text_latin})]}),e.jsxs("div",{className:"mt-6 pt-4 flex justify-between items-center text-sm text-green-600 border-t border-green-100",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-800 border border-blue-200",children:["Juz ",r.juz||"-"]}),e.jsxs("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-xs font-medium bg-purple-100 text-purple-800 border border-purple-200",children:["Halaman ",r.page||"-"]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("button",{onClick:()=>{const n=`🕌 *${b?b.name_indonesian:`Surah ${r.surah_number}`}* - Ayat ${r.ayah_number}

🔤 *Arab:*
${r.text_arabic}

🇮🇩 *Terjemahan Indonesia:*
${r.text_indonesian||r.translation_id}

🔗 Baca selengkapnya: ${window.location.origin}/surah/${r.surah_number}/${r.ayah_number}

📱 Dibagikan dari IndoQuran`,w=`https://wa.me/?text=${encodeURIComponent(n)}`;window.open(w,"_blank")},className:"flex items-center gap-1 text-green-500 hover:text-green-700 hover:shadow-sm transition-all duration-300 px-3 py-1.5 rounded-lg bg-green-50/70 hover:bg-green-100 border border-green-200",title:"Bagikan ke WhatsApp",children:[e.jsx(D,{className:"text-lg"}),e.jsx("span",{children:"Bagikan"})]}),e.jsxs("a",{href:`/surah/${r.surah_number}/${r.ayah_number}`,className:"flex items-center gap-1 text-green-600 hover:text-green-800 hover:shadow-sm transition-all duration-300 px-3 py-1.5 rounded-lg bg-green-50/70 hover:bg-green-100 border border-green-200 font-medium",children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),"Lihat Detail"]})]})]})]})}o.memo(U);function K(){const r=F(),b=new URLSearchParams(r.search),i=b.get("q")||"",p=parseInt(b.get("page"))||1,[v,k]=o.useState([]),[y,f]=o.useState(!1),[c,$]=o.useState(!1),[S,C]=o.useState(null),[l,I]=o.useState(p),[n,h]=o.useState(1),[w,x]=o.useState(0),[j,P]=o.useState(null),[m,A]=o.useState(null),[N,g]=o.useState(!1),[q,_]=o.useState(null);o.useEffect(()=>{if(!i)return;f(!0);const a=p;O(`/api/search?q=${encodeURIComponent(i)}&per_page=10&page=${a}`).then(s=>{if(!s.ok)throw new Error("Failed to fetch search results");return s.json()}).then(s=>{var u,t,d;s.status==="success"?(k(s.data||[]),P(s.pagination),h(((u=s.pagination)==null?void 0:u.last_page)||1),x(((t=s.pagination)==null?void 0:t.total)||0),I(((d=s.pagination)==null?void 0:d.current_page)||1),a>1&&window.scrollTo({top:0,behavior:"smooth"})):C("Gagal memuat hasil pencarian"),f(!1),$(!1)}).catch(s=>{C(s.message),f(!1),$(!1)})},[i,p]),o.useEffect(()=>()=>{m&&(m.pause(),A(null),g(!1),_(null))},[m]);const H=a=>{let s=null;if(a.audio_urls){const t=typeof a.audio_urls=="string"?JSON.parse(a.audio_urls):a.audio_urls;typeof t=="object"&&!Array.isArray(t)?s=Object.values(t)[0]:Array.isArray(t)&&(s=t[0])}else a.audio_url&&(s=a.audio_url);if(!s){console.warn("No audio URL found for ayah:",a);return}if(m&&q===a.id)if(N){m.pause(),g(!1);return}else{const t=m.play();t!==void 0&&t.then(()=>{g(!0)}).catch(d=>{console.error("Failed to resume audio:",d),u()});return}m&&(m.pause(),g(!1)),u();function u(){const t=new Audio(s);t.addEventListener("ended",()=>{g(!1),_(null)}),t.addEventListener("error",R=>{console.error("Audio playback error:",R),g(!1),_(null)});const d=t.play();d!==void 0&&d.then(()=>{A(t),_(a.id),g(!0)}).catch(R=>{console.error("Failed to play audio:",R),g(!1),_(null)})}},M=a=>{$(!0);const s=new URLSearchParams(r.search);s.set("page",a),window.location.href=`/search?${s.toString()}`};return i?y&&l===1?e.jsx(L,{isLoading:!0,children:e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-green-50 via-white to-emerald-50",children:e.jsx("div",{className:"flex justify-center items-center h-64 pt-24",children:e.jsxs("div",{className:"text-center",children:[e.jsx(V,{size:"lg"}),e.jsx("p",{className:"text-green-600 font-medium mt-4",children:"Mencari ayat..."})]})})})}):S?e.jsx(L,{children:e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-green-50 via-white to-emerald-50",children:e.jsx("div",{className:"max-w-2xl mx-auto px-4 py-8 pt-24",children:e.jsx("div",{className:"bg-gradient-to-br from-red-50 to-pink-50 border border-red-200 text-red-700 p-6 rounded-xl shadow-lg",role:"alert",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"text-2xl",children:"⚠️"}),e.jsxs("div",{children:[e.jsx("strong",{className:"font-bold",children:"Kesalahan! "}),e.jsx("span",{className:"block sm:inline",children:S})]})]})})})})}):e.jsx(L,{children:e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-green-50 via-white to-emerald-50",children:e.jsxs("div",{className:"max-w-6xl mx-auto px-4 py-8 pt-24 pb-20",children:[e.jsx(E,{title:`Hasil Pencarian: ${i} | Al-Quran Digital Indonesia`,description:`Hasil pencarian untuk "${i}" dalam Al-Quran. Menemukan ${w} ayat yang sesuai dengan kata kunci Anda.`,keywords:`cari ayat quran ${i}, pencarian al quran, ${i} dalam quran, al quran digital`,canonicalUrl:`https://my.indoquran.web.id/search?q=${encodeURIComponent(i)}`}),v.length>0&&e.jsx(W,{type:"SearchResults",data:{query:i,results:v}}),e.jsx(T,{className:"mb-8"}),e.jsxs("div",{className:"bg-white rounded-3xl shadow-xl p-8 mb-8 border border-green-100",children:[e.jsxs("div",{className:"mb-6",children:[e.jsxs("h1",{className:"text-3xl font-bold text-green-800 mb-3",children:['Hasil Pencarian: "',i,'"']}),e.jsx("p",{className:"text-green-600 text-lg",children:j?e.jsxs(e.Fragment,{children:["Menampilkan ",j.from,"-",j.to," dari ",j.total," hasil dalam bahasa Indonesia",n>1&&` (Halaman ${l} dari ${n})`]}):`Ditemukan ${v.length} hasil dalam bahasa Indonesia`})]}),e.jsx("form",{className:"mt-6",onSubmit:a=>{a.preventDefault();const s=a.target.elements.q.value;s.trim()&&(window.location.href=`/search?q=${encodeURIComponent(s)}`)},children:e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[e.jsx("input",{type:"text",name:"q",defaultValue:i,placeholder:"Cari ayat atau kata kunci lainnya...",className:"flex-1 px-6 py-4 rounded-xl border border-green-200 focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-transparent shadow-sm hover:shadow-md transition-all duration-200 text-lg"}),e.jsx("button",{type:"submit",className:"bg-gradient-to-r from-green-600 to-emerald-600 text-white px-8 py-4 rounded-xl hover:from-green-700 hover:to-emerald-700 transition-all duration-300 focus:outline-none focus:ring-2 focus:ring-green-500 shadow-md hover:shadow-lg font-semibold",children:"Cari Ulang"})]})})]}),v.length===0?e.jsx("div",{className:"bg-gradient-to-br from-yellow-50 to-amber-50 border border-yellow-200 text-yellow-800 px-6 py-4 rounded-xl shadow-sm",role:"alert",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"text-2xl",children:"🔍"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold",children:"Tidak ditemukan hasil"}),e.jsxs("p",{className:"text-sm",children:['Tidak ditemukan hasil untuk kata kunci "',i,'". Coba gunakan kata kunci lain.']})]})]})}):e.jsx("div",{className:"space-y-6",children:v.map(a=>e.jsx(U,{ayah:a,surah:a.surah,highlightText:i,playAudio:H,isPlaying:q===a.id&&N,activeAyah:q},a.id))}),n>1&&e.jsxs("div",{className:"mt-12 space-y-6",children:[e.jsx("div",{className:"text-center",children:e.jsx("div",{className:"inline-flex items-center px-6 py-3 bg-gradient-to-r from-green-50 to-emerald-50 rounded-full border border-green-200 shadow-sm",children:e.jsxs("span",{className:"text-sm font-medium text-green-700",children:["Halaman ",e.jsx("span",{className:"font-bold text-green-800",children:l})," dari ",e.jsx("span",{className:"font-bold text-green-800",children:n})]})})}),e.jsx("div",{className:"flex justify-center",children:e.jsxs("nav",{className:"flex items-center space-x-2 bg-white rounded-xl shadow-lg border border-green-100 p-2","aria-label":"Pagination",children:[e.jsxs("button",{onClick:()=>M(Math.max(1,l-1)),disabled:l===1||c,className:`flex items-center px-4 py-3 rounded-lg text-sm font-medium transition-all duration-200 ${l===1||c?"bg-gray-50 text-gray-400 cursor-not-allowed border border-gray-200":"bg-white text-green-700 hover:bg-green-50 hover:text-green-800 border border-green-200 hover:border-green-300 shadow-sm hover:shadow-md"}`,children:[c?e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-2 border-current border-t-transparent mr-2"}):e.jsx("svg",{className:"h-4 w-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M15 19l-7-7 7-7"})}),e.jsx("span",{className:"hidden sm:inline",children:"Sebelumnya"}),e.jsx("span",{className:"sm:hidden",children:"Prev"})]}),(()=>{const a=[];let u,t;n<=5?(u=1,t=n):l<=3?(u=1,t=5):l+2>=n?(u=n-5+1,t=n):(u=l-2,t=l+2);for(let d=u;d<=t;d++)a.push(e.jsx("button",{onClick:()=>M(d),disabled:c,className:`px-4 py-3 min-w-[44px] text-sm font-medium rounded-lg transition-all duration-200 border ${l===d?"bg-gradient-to-r from-green-600 to-emerald-600 text-white border-green-600 shadow-lg ring-2 ring-green-200 font-bold":c?"bg-gray-50 text-gray-400 cursor-not-allowed border-gray-200":"bg-white text-green-700 hover:bg-green-50 hover:text-green-800 border-green-200 hover:border-green-300 shadow-sm hover:shadow-md hover:scale-105"}`,children:d},d));return t<n&&(t<n-1&&a.push(e.jsx("span",{className:"px-3 py-3 text-green-500 bg-green-50 border border-green-200 rounded-lg",children:"..."},"ellipsis")),a.push(e.jsx("button",{onClick:()=>M(n),disabled:c,className:`px-4 py-3 min-w-[44px] text-sm font-medium rounded-lg border transition-all duration-200 ${l===n?"bg-gradient-to-r from-green-600 to-emerald-600 text-white border-green-600 shadow-lg ring-2 ring-green-200 font-bold":c?"bg-gray-50 text-gray-400 cursor-not-allowed border-gray-200":"bg-white text-green-700 hover:bg-green-50 hover:text-green-800 border-green-200 hover:border-green-300 shadow-sm hover:shadow-md hover:scale-105"}`,children:n},n))),a})(),e.jsxs("button",{onClick:()=>M(Math.min(n,l+1)),disabled:l===n||c,className:`flex items-center px-4 py-3 rounded-lg text-sm font-medium transition-all duration-200 ${l===n||c?"bg-gray-50 text-gray-400 cursor-not-allowed border border-gray-200":"bg-white text-green-700 hover:bg-green-50 hover:text-green-800 border border-green-200 hover:border-green-300 shadow-sm hover:shadow-md"}`,children:[e.jsx("span",{className:"hidden sm:inline",children:"Selanjutnya"}),e.jsx("span",{className:"sm:hidden",children:"Next"}),c?e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-2 border-current border-t-transparent ml-2"}):e.jsx("svg",{className:"h-4 w-4 ml-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 5l7 7-7 7"})})]})]})})]})]})})}):e.jsx(L,{children:e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-green-50 via-white to-emerald-50",children:e.jsxs("div",{className:"max-w-4xl mx-auto px-4 py-8 pt-24",children:[e.jsx(E,{title:"Pencarian Al-Quran | Cari Ayat dalam Al-Quran",description:"Cari ayat dalam Al-Quran berdasarkan terjemahan Bahasa Indonesia dengan mudah dan cepat.",keywords:"cari ayat quran, pencarian al quran, search al quran, al quran digital, cari terjemahan quran",canonicalUrl:"https://my.indoquran.web.id/search"}),e.jsx(T,{className:"mb-12"}),e.jsxs("div",{className:"bg-white rounded-3xl shadow-xl p-10 border border-green-100 text-center mb-10",children:[e.jsx("div",{className:"text-6xl mb-6",children:"🔍"}),e.jsx("h1",{className:"text-4xl font-bold text-green-800 mb-4",children:"Pencarian Al-Quran"}),e.jsx("p",{className:"text-green-600 text-xl mb-8",children:"Cari ayat dalam Al-Quran berdasarkan terjemahan Bahasa Indonesia"})]}),e.jsx("div",{className:"bg-white rounded-3xl shadow-xl p-8 border border-green-100 mb-10",children:e.jsx("form",{onSubmit:a=>{a.preventDefault();const s=a.target.elements.q.value;s.trim()&&(window.location.href=`/search?q=${encodeURIComponent(s)}`)},children:e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[e.jsx("input",{type:"text",name:"q",placeholder:"Masukkan kata kunci pencarian...",className:"flex-1 px-6 py-4 rounded-xl border border-green-200 focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-transparent shadow-sm hover:shadow-md transition-all duration-200 text-lg"}),e.jsx("button",{type:"submit",className:"bg-gradient-to-r from-green-600 to-emerald-600 text-white px-8 py-4 rounded-xl hover:from-green-700 hover:to-emerald-700 transition-all duration-300 focus:outline-none focus:ring-2 focus:ring-green-500 shadow-md hover:shadow-lg font-semibold text-lg",children:"Cari Ayat"})]})})}),e.jsxs("div",{className:"bg-gradient-to-br from-green-50 to-emerald-50 rounded-2xl p-8 shadow-lg border border-green-100",children:[e.jsxs("h2",{className:"text-2xl font-semibold text-green-800 mb-6 flex items-center gap-3",children:[e.jsx("div",{className:"text-3xl",children:"💡"}),"Tips Pencarian"]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-4 text-green-700",children:[e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"text-green-600 mt-1",children:"•"}),e.jsx("span",{children:"Gunakan kata kunci spesifik untuk hasil yang lebih akurat"})]}),e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"text-green-600 mt-1",children:"•"}),e.jsx("span",{children:"Cari berdasarkan kata atau frasa dalam terjemahan Bahasa Indonesia"})]})]}),e.jsxs("div",{className:"space-y-4 text-green-700",children:[e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"text-green-600 mt-1",children:"•"}),e.jsx("span",{children:"Untuk pencarian lebih dari satu kata, sistem akan mencari ayat yang mengandung semua kata tersebut"})]}),e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"text-green-600 mt-1",children:"•"}),e.jsx("span",{children:"Pencarian tidak case sensitive (huruf besar dan kecil dianggap sama)"})]})]})]})]})]})})})}export{K as default};
