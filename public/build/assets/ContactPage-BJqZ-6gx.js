import{u as S,D as F,r as o,j as e,Q as L}from"./index-Dsq5ZXV3.js";import{i as M,b as z}from"./auth-CHpCKrUu.js";import"./vendor-DavUf6mE.js";var E={};function B(){const N=S(),l=F(),[r,u]=o.useState({name:"",email:"",subject:"",message:""}),[c,f]=o.useState(null),[d,v]=o.useState(null),[s,m]=o.useState({}),[p,b]=o.useState(!1),[x,k]=o.useState("");o.useEffect(()=>{const a=async()=>{if(l.state&&M())try{const t=await z("/api/user");if(t.ok){const n=await t.json();n&&v(n)}}catch(t){console.warn("Failed to fetch user data:",t)}};l.state&&(u(t=>({...t,...l.state})),a())},[l.state]),o.useEffect(()=>{d&&l.state&&u(a=>({...a,name:d.name||a.name,email:d.email||a.email}))},[d,l.state]);const h=a=>{const{name:t,value:n}=a.target;u(i=>({...i,[t]:n})),s[t]&&m(i=>({...i,[t]:null}))},w=a=>{const t=a.target.files[0];if(t){if(t.size>10*1024*1024){m(i=>({...i,attachment:"Ukuran file tidak boleh lebih dari 10MB"}));return}if(!["image/jpeg","image/jpg","image/png","application/pdf","application/msword","application/vnd.openxmlformats-officedocument.wordprocessingml.document"].includes(t.type)){m(i=>({...i,attachment:"Format file tidak didukung. Gunakan: JPG, PNG, PDF, DOC, DOCX"}));return}f(t),s.attachment&&m(i=>({...i,attachment:null}))}},y=()=>{const a={};return r.name.trim()||(a.name="Nama wajib diisi"),r.email.trim()?/^\S+@\S+\.\S+$/.test(r.email)||(a.email="Format email tidak valid"):a.email="Email wajib diisi",r.subject.trim()||(a.subject="Subjek wajib diisi"),r.message.trim()?r.message.length<10&&(a.message="Pesan terlalu pendek (minimal 10 karakter)"):a.message="Pesan wajib diisi",m(a),Object.keys(a).length===0},C=async a=>{if(a.preventDefault(),!!y()){b(!0);try{const t=L();let n,i={"X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]')?.getAttribute("content")||"","X-Internal-Request":E.VITE_INTERNAL_API_KEY||"ind0Quran-Internal-Key-2025!",...t};c?(n=new FormData,n.append("name",r.name),n.append("email",r.email),n.append("subject",r.subject),n.append("message",r.message),n.append("attachment",c),delete i["Content-Type"]):(i["Content-Type"]="application/json",n=JSON.stringify(r));const j=await fetch("/api/contact",{method:"POST",headers:i,body:n}),g=await j.json();if(j.ok)k(g.message||"Pesan telah berhasil dikirim. Terima kasih!"),u({name:"",email:"",subject:"",message:""}),f(null),setTimeout(()=>{N("/")},3e3);else if(g.errors)m(g.errors);else throw new Error(g.message||"Terjadi kesalahan saat mengirim pesan")}catch(t){m({general:t.message||"Terjadi kesalahan saat mengirim pesan. Silakan coba lagi nanti."})}finally{b(!1)}}};return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-purple-50 to-pink-50",children:e.jsx("div",{className:"max-w-3xl mx-auto px-4 py-8 pt-24 pb-20",children:e.jsxs("div",{className:"bg-gradient-to-r from-white to-blue-50 p-8 rounded-2xl shadow-2xl border border-purple-100",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("h1",{className:"text-4xl font-bold bg-gradient-to-r from-islamic-green via-blue-600 to-purple-600 bg-clip-text text-transparent mb-4",children:"Hubungi Kami"}),e.jsx("div",{className:"w-24 h-1 bg-gradient-to-r from-islamic-green via-blue-500 to-purple-500 mx-auto rounded-full"})]}),l.state&&e.jsx("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 border-l-4 border-blue-500 p-4 mb-6 rounded-r-lg shadow-md",children:e.jsxs("div",{className:"flex",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("svg",{className:"h-6 w-6 text-blue-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),e.jsx("div",{className:"ml-3",children:e.jsxs("p",{className:"text-sm font-medium text-blue-800",children:["üìù Formulir telah diisi otomatis untuk konfirmasi donasi.",d&&e.jsxs("span",{className:"block mt-1 text-blue-700",children:["üë§ Nama dan email diambil dari akun Anda: ",e.jsx("strong",{children:d.name})]}),e.jsx("span",{className:"block mt-1",children:"Silakan lengkapi data yang diperlukan."})]})})]})}),x&&e.jsx("div",{className:"bg-gradient-to-r from-green-50 to-emerald-50 border-l-4 border-green-500 p-4 mb-6 rounded-r-lg shadow-md",children:e.jsxs("div",{className:"flex",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("svg",{className:"h-6 w-6 text-green-500",viewBox:"0 0 20 20",fill:"currentColor",children:e.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})})}),e.jsx("div",{className:"ml-3",children:e.jsx("p",{className:"text-sm font-medium text-green-800",children:x})})]})}),s.general&&e.jsx("div",{className:"bg-gradient-to-r from-red-50 to-pink-50 border-l-4 border-red-500 p-4 mb-6 rounded-r-lg shadow-md",children:e.jsxs("div",{className:"flex",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("svg",{className:"h-6 w-6 text-red-500",viewBox:"0 0 20 20",fill:"currentColor",children:e.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})})}),e.jsx("div",{className:"ml-3",children:e.jsx("p",{className:"text-sm font-medium text-red-800",children:s.general})})]})}),e.jsx("div",{className:"bg-gradient-to-r from-indigo-50 to-purple-50 p-6 rounded-xl mb-8 border border-indigo-100",children:e.jsx("p",{className:"text-gray-700 text-center leading-relaxed",children:"Kami sangat menghargai masukan, pertanyaan, dan saran dari Anda. Silakan isi formulir di bawah ini, dan tim kami akan menghubungi Anda secepatnya."})}),e.jsx("div",{className:"bg-gradient-to-r from-yellow-50 to-orange-50 p-4 rounded-lg mb-6 border border-yellow-200",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("svg",{className:"h-5 w-5 text-yellow-600",viewBox:"0 0 20 20",fill:"currentColor",children:e.jsx("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})})}),e.jsx("div",{className:"ml-3",children:e.jsxs("p",{className:"text-sm font-medium text-yellow-800",children:["üìã Semua field yang ditandai dengan ",e.jsx("span",{className:"text-red-500 font-bold",children:"*"})," wajib diisi"]})})]})}),e.jsxs("form",{onSubmit:C,encType:"multipart/form-data",className:"space-y-6",children:[e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700 mb-1",children:["Nama ",e.jsx("span",{className:"text-red-500",children:"*"}),d&&l.state&&e.jsx("span",{className:"ml-2 text-xs bg-green-100 text-green-700 px-2 py-1 rounded-full",children:"‚úì Auto-filled dari akun"})]}),e.jsx("input",{type:"text",id:"name",name:"name",value:r.name,onChange:h,required:!0,className:`w-full px-4 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-islamic-green ${s.name?"border-red-300":d&&l.state&&r.name?"border-green-300 bg-green-50":"border-gray-300"}`}),s.name&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:s.name})]}),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-1",children:["Email ",e.jsx("span",{className:"text-red-500",children:"*"}),d&&l.state&&e.jsx("span",{className:"ml-2 text-xs bg-green-100 text-green-700 px-2 py-1 rounded-full",children:"‚úì Auto-filled dari akun"})]}),e.jsx("input",{type:"email",id:"email",name:"email",value:r.email,onChange:h,required:!0,className:`w-full px-4 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-islamic-green ${s.email?"border-red-300":d&&l.state&&r.email?"border-green-300 bg-green-50":"border-gray-300"}`}),s.email&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:s.email})]}),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"subject",className:"block text-sm font-medium text-gray-700 mb-1",children:["Subjek ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",id:"subject",name:"subject",value:r.subject,onChange:h,required:!0,className:`w-full px-4 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-islamic-green ${s.subject?"border-red-300":"border-gray-300"}`}),s.subject&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:s.subject})]}),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"message",className:"block text-sm font-medium text-gray-700 mb-1",children:["Pesan ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("textarea",{id:"message",name:"message",value:r.message,onChange:h,required:!0,rows:"5",className:`w-full px-4 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-islamic-green ${s.message?"border-red-300":"border-gray-300"}`}),s.message&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:s.message})]}),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"attachment",className:"block text-sm font-medium text-gray-700 mb-1",children:["Lampiran (Opsional)",e.jsx("span",{className:"ml-2 text-xs text-gray-500",children:"- Untuk bukti transfer donasi atau dokumen pendukung"})]}),e.jsx("input",{type:"file",id:"attachment",name:"attachment",onChange:w,accept:".jpeg,.jpg,.png,.pdf,.doc,.docx",className:`w-full px-4 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-islamic-green ${s.attachment?"border-red-300":"border-gray-300"}`}),e.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Format yang didukung: JPG, PNG, PDF, DOC, DOCX. Maksimal 10MB."}),c&&e.jsxs("p",{className:"mt-1 text-sm text-green-600",children:["‚úì File terpilih: ",c.name," (",(c.size/1024/1024).toFixed(2)," MB)"]}),s.attachment&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:s.attachment})]}),e.jsx("div",{className:"text-center pt-4",children:e.jsx("button",{type:"submit",disabled:p||x,className:`px-8 py-4 bg-gradient-to-r from-islamic-green via-blue-600 to-purple-600 text-white font-semibold rounded-xl shadow-lg hover:shadow-xl transform hover:scale-105 transition-all duration-300 focus:outline-none focus:ring-4 focus:ring-purple-300 ${p||x?"opacity-70 cursor-not-allowed transform-none":"hover:from-islamic-green-dark hover:via-blue-700 hover:to-purple-700"}`,children:e.jsx("span",{className:"flex items-center justify-center",children:p?e.jsxs(e.Fragment,{children:[e.jsxs("svg",{className:"animate-spin h-5 w-5 mr-3 text-white",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Mengirim..."]}):e.jsxs(e.Fragment,{children:[e.jsx("svg",{className:"h-5 w-5 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 19l9 2-9-18-9 18 9-2zm0 0v-8"})}),"Kirim Pesan"]})})})})]}),e.jsx("div",{className:"mt-12 pt-8 border-t border-purple-200",children:e.jsxs("div",{className:"bg-gradient-to-r from-islamic-green/5 to-purple-100/50 p-6 rounded-xl",children:[e.jsx("h2",{className:"text-2xl font-bold bg-gradient-to-r from-islamic-brown via-indigo-600 to-purple-600 bg-clip-text text-transparent mb-6 text-center",children:"Informasi Kontak"}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[e.jsxs("div",{className:"flex items-center p-4 bg-white rounded-lg shadow-md border border-blue-100",children:[e.jsx("div",{className:"flex-shrink-0 p-3 bg-gradient-to-r from-blue-500 to-purple-500 rounded-full",children:e.jsx("svg",{className:"h-6 w-6 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Email"}),e.jsx("p",{className:"text-lg font-semibold text-gray-800",children:"kontak@indoquran.web.id"})]})]}),e.jsxs("div",{className:"flex items-center p-4 bg-white rounded-lg shadow-md border border-purple-100",children:[e.jsx("div",{className:"flex-shrink-0 p-3 bg-gradient-to-r from-purple-500 to-pink-500 rounded-full",children:e.jsxs("svg",{className:"h-6 w-6 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})]})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Lokasi"}),e.jsx("p",{className:"text-lg font-semibold text-gray-800",children:"Jakarta, Indonesia"})]})]})]})]})})]})})})}export{B as default};
